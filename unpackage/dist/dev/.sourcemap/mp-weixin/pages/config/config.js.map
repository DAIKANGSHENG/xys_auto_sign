{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/ASUS/Documents/HBuilderProjects/xysautosign/pages/config/config.vue?83d1","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/xysautosign/pages/config/config.vue?6910","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/xysautosign/pages/config/config.vue?244d","uni-app:///pages/config/config.vue","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/xysautosign/pages/config/config.vue?0b64","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/xysautosign/pages/config/config.vue?bb39"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","openId","unionId","lat","lng","sessionId","traineeId","phone","adcode","address","status","username","password","imgUrl","isChoose","defaultUrl","signImgStr","encryptValue","model","week","canvansWidth","canvansHeight","cache","methods","sumitInfo","uni","title","content","success","url","method","cookie","addHeader","openImg","console","tempFilePath","clearSignImg","getAdcode","key","location","extensions","s","platform","appname","sdkversion","logversion","header","Referer","getTraineeId","getStatus","getUserInfo","loginer","klass","drawInfoImg","src","setTimeout","ctx","canvasId","fail","commonPostPolicy","customerType","uploadType","publicRead","uplodFile","filePath","name","formData","policy","OSSAccessKeyId","signature","success_action_status","callback","SIGN_IN","onLoad"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsyB,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACkE1zB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACAC;UACAC;UACAC;UACAC;YACA;UACA;QACA;QACA;MACA;MACAH;QACAC;MACA;MACAD;QACAxB;QACAC;QACAC;QACAC;QACAO;QACAC;MACA;MACA;QACA;MACA;MACA;MACA;QACAiB;QACAC;QACA9B;UACAW;UACAC;UACAX;UACAC;QACA;QACA6B;QACAC;UACA;QACA;MACA;QACA;UACAP;UACAA;YACAC;YACAC;YACAC;cACA;YACA;UACA;QACA;UACA;UACA;UACA;UACAH;UACA;UACA;QACA;MACA;IACA;IACAQ;MAAA;MACAC;MACAT;QACAG;UACAM;UACAT;YACAU;YACAP;cACAM;cACA;cACA;gBACApB;gBACAC;cACA;YACA;UACA;UACA;YACAD;YACAC;UACA;UACA;QACA;MACA;IACA;IACAqB;MACA;QACAtB;QACAC;MACA;IACA;IACAsB;MAAA;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACApB;QACAI;QACAC;QACA9B;QACA8C;UACAC;QACA;MACA;QACAb;QACA;QACA;QACAT;QACA;UACAA;YACAC;YACAC;YACAC;cACA;gBACAH;kBACAC;gBACA;gBACA;cACA;YACA;UACA;QACA;UACAD;YACAC;YACAC;YACAC;cACA;gBACAH;kBACAC;gBACA;gBACA;cACA;YACA;UACA;QACA;;QAEA;MACA;IACA;IACAsB;MAAA;MACA;QACAnB;QACAC;QACAC;QACAC;UACAf;UACA8B;QACA;MACA;QACA;QACA;MACA;IACA;IACAE;MAAA;MACA;QACApB;QACAC;QACA9B;UACAM;QACA;QACAyB;QACAC;UACAf;UACA8B;QACA;MACA;QACA;UACA;UACA;UACAtB;YACAxB;YACAC;YACAC;YACAC;YACAO;YACAC;UACA;UACA;QACA;UACA;UACA;UACAsB;UACA;YACA;YACA;YACA;UACA;YACA;cACA;YACA;cACA;YACA;UACA;QACA;MAEA;IACA;IACAgB;MAAA;MACA;QACArB;QACAC;QACAC;QACAC;UACAf;UACA8B;QACA;MACA;QACA;UAAAI;UAAAC;QACA;MACA;IACA;IACAC;MAAA;MACA5B;QACA6B;QACA1B;UACAM;UACA;UACA;UACA;UACAqB;YACAC;YACA;YACAA;YACAA;YACAA;YACAA;YACA;YACA;YACA;YACA;YACA;YACA;YACAA;YACAA;YACAA;YACAA;YACAA;YACAA;YACAtB;YACAsB;cACA/B;gBAAA;gBACAgC;gBACA7B;kBACA;oBACAd;oBACAC;kBACA;kBACA;gBACA;gBACA2C;kBACAxB;gBACA;cACA;YACA;UACA;QACA;QACAwB;UACAxB;UACAA;QACA;MACA;IAEA;IACAyB;MAAA;MACAzB;MACA;QACAL;QACAC;QACA9B;UACA4D;UACAC;UACAC;QACA;QACA/B;QACAC;UACAf;UACA8B;QACA;MACA;QACA;MACA;IACA;IACAgB;MAAA;MACA7B;MACAA;MACAT;QACAI;QACAmC;QACAC;QACAC;UACA5B;UACA6B;UACAC;UACAC;UACAC;UACAV;UACAC;UACAU;QACA;QACA3C;UACAM;UACA;UACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAsC;MAAA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;QACA3C;QACAC;QACA9B;QACA+B;QACAC;UACAf;UACA8B;QACA;MACA;QACAb;QACAA;QACAA;QACAT;UACAuC;UACApC;YACAM;UACA;UACAwB;YACAxB;UACA;QACA;QACAA;QACAT;QACAA;UACAC;UACAC;UACAC;YACA;cACAH;gBACAI;cACA;YACA;UACA;QACA;MAEA;IACA;EACA;EACA4C;IAAA;IACAhD;MACAG;QACA;MACA;IACA;IAEA;IACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACheA;AAAA;AAAA;AAAA;AAA+pC,CAAgB,ynCAAG,EAAC,C;;;;;;;;;;;ACAnrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/config/config.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/config/config.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./config.vue?vue&type=template&id=11ea80f4&scoped=true&\"\nvar renderjs\nimport script from \"./config.vue?vue&type=script&lang=js&\"\nexport * from \"./config.vue?vue&type=script&lang=js&\"\nimport style0 from \"./config.vue?vue&type=style&index=0&id=11ea80f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11ea80f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/config/config.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=template&id=11ea80f4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"config\">\r\n\t\t<div class=\"avatar\">\r\n\t\t\t<image @click=\"openImg\" @longpress=\"clearSignImg\" :src=\"imgUrl.defaultUrl\" alt=\"\" />\r\n\t\t</div>\r\n\t\t<div class=\"userInfo\">\r\n\t\t\t<div class=\"Info\">\r\n\t\t\t\t<div class=\"avatarImg\">\r\n\t\t\t\t\t<image src=\"../../static/id.png\" alt=\"\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"avararInput\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"openId\" placeholder=\"请输入openId\" placeholder-style=\"font-size:15px;\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"Info\">\r\n\t\t\t\t<div class=\"avatarImg\">\r\n\t\t\t\t\t<image src=\"../../static/idlogin.png\" alt=\"\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"avararInput\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"unionId\" placeholder=\"请输入unionId\" placeholder-style=\"font-size:15px;\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"Info\">\r\n\t\t\t\t<div class=\"avatarImg\">\r\n\t\t\t\t\t<image src=\"../../static/idlogin.png\" alt=\"\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"avararInput\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"username\" placeholder=\"请输入用户名\" placeholder-style=\"font-size:15px;\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"Info\">\r\n\t\t\t\t<div class=\"avatarImg\">\r\n\t\t\t\t\t<image src=\"../../static/idlogin.png\" alt=\"\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"avararInput\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"password\" placeholder=\"请输入密码\" placeholder-style=\"font-size:15px;\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"Info\">\r\n\t\t\t\t<div class=\"avatarImg\">\r\n\t\t\t\t\t<image src=\"../../static/lat.png\" alt=\"\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"avararInput\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"lat\" placeholder=\"请输入签到坐标的Latitude\" placeholder-style=\"font-size:15px;\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"Info\">\r\n\t\t\t\t<div class=\"avatarImg\">\r\n\t\t\t\t\t<image src=\"../../static/lng.png\" alt=\"\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"avararInput\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"lng\" placeholder=\"请输入签到坐标的Longitude\"\r\n\t\t\t\t\t\tplaceholder-style=\"font-size:15px;\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"sign\">\r\n\t\t\t<div class=\"sumit\" @click='sumitInfo'>\r\n\t\t\t\tSumit Info\r\n\t\t\t</div>\r\n\t\t</div>\r\n    <canvas style=\"border: 1px solid green;position: absolute;top: -10000px;left: -1000px;\" :style=\"{'width':canvansWidth+'px','height': canvansHeight+'px'}\" canvas-id=\"firstCanvas\" ref=\"mycanvas\"></canvas>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport request from \"../../utils/request.js\"\r\n\timport md5 from \"blueimp-md5\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\topenId: '',\r\n\t\t\t\tunionId: '',\r\n\t\t\t\tlat: '',\r\n\t\t\t\tlng: '',\r\n\t\t\t\tsessionId: '',\r\n\t\t\t\ttraineeId: '',\r\n\t\t\t\tphone: '',\r\n\t\t\t\tadcode: '',\r\n\t\t\t\taddress: '',\r\n\t\t\t\tstatus: '',\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\timgUrl: {\r\n\t\t\t\t\tisChoose: 0,\r\n\t\t\t\t\tdefaultUrl: '../../static/avatar.png'\r\n\t\t\t\t},\r\n\t\t\t\tsignImgStr: '',\r\n\t\t\t\tencryptValue: '',\r\n\t\t\t\tmodel: '',\r\n        week:['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],\r\n        canvansWidth:0,\r\n        canvansHeight:0,\r\n        cache:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsumitInfo() {\r\n        if(this.week[new Date().getDay()]=='星期日'||this.week[new Date().getDay()]=='星期六'){\r\n          uni.showModal({\r\n            title: '提示',\r\n            content: '周六周日不用打卡',\r\n            success: (res) => {\r\n              return\r\n            }\r\n          })\r\n          return\r\n        }\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tuni.setStorageSync('user_data', {\r\n\t\t\t\t\topenId: this.openId,\r\n\t\t\t\t\tunionId: this.unionId,\r\n\t\t\t\t\tlat: this.lat,\r\n\t\t\t\t\tlng: this.lng,\r\n\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\tpassword: this.password\r\n\t\t\t\t})\r\n        if(uni.getStorageSync('JSESSIONID')){\r\n          this.sessionId=uni.getStorageSync('JSESSIONID')\r\n        }\r\n\t\t\t\tconst md5 = require(\"blueimp-md5\");\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'login/login.action',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\t\tpassword: md5(this.password),\r\n\t\t\t\t\t\topenId: this.openId,\r\n\t\t\t\t\t\tunionId: this.unionId\r\n\t\t\t\t\t},\r\n          cookie:'JSESSIONID='+this.sessionId,\r\n\t\t\t\t\taddHeader: {\r\n\t\t\t\t\t\t'referer': 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code != 200) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '登录出错，请检查登录信息是否正确',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.phone = res.data.phone\r\n\t\t\t\t\t\tthis.sessionId = res.data.sessionId\r\n\t\t\t\t\t\tthis.encryptValue = res.data.encryptValue\r\n            uni.setStorageSync('JSESSIONID', this.sessionId)\r\n\t\t\t\t\t\t//获取trainrrId\r\n\t\t\t\t\t\tthis.getTraineeId()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenImg() {\r\n\t\t\t\tconsole.log('------------------------')\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsuccess: (res) => {\r\n            console.log(res)\r\n            uni.saveFile({\r\n              tempFilePath: res.tempFilePaths[0],\r\n              success:saveImg=>{\r\n                console.log(saveImg)\r\n                this.cache=saveImg.savedFilePath\r\n                this.imgUrl = {\r\n                  isChoose: 1,\r\n                  defaultUrl: saveImg.savedFilePath\r\n                }\r\n              }\r\n            })\r\n\t\t\t\t\t\tthis.imgUrl = {\r\n\t\t\t\t\t\t\tisChoose: 1,\r\n\t\t\t\t\t\t\tdefaultUrl: res.tempFilePaths[0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// this.commonPostPolicy()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n      clearSignImg(){\r\n        this.imgUrl = {\r\n          isChoose: 0,\r\n          defaultUrl: '../../static/avatar.png'\r\n        }\r\n      },\r\n\t\t\tgetAdcode() {\r\n\t\t\t\tlet locationParams = {\r\n\t\t\t\t\tkey: \"c222383ff12d31b556c3ad6145bb95f4\",\r\n\t\t\t\t\tlocation: this.lng + ',' + this.lat,\r\n\t\t\t\t\textensions: \"all\",\r\n\t\t\t\t\ts: \"rsx\",\r\n\t\t\t\t\tplatform: \"WXJS\",\r\n\t\t\t\t\tappname: \"c222383ff12d31b556c3ad6145bb95f4\",\r\n\t\t\t\t\tsdkversion: \"1.2.0\",\r\n\t\t\t\t\tlogversion: \"2.0\",\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://restapi.amap.com/v3/geocode/regeo',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: locationParams,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tReferer: 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tthis.address = res.data.regeocode.formatted_address\r\n\t\t\t\t\tthis.adcode = res.data.regeocode.addressComponent.adcode\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tif (typeof this.address == 'object') {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '打卡位置信息有误',\r\n\t\t\t\t\t\t\tcontent: '是否自动获取学校打卡位置',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tthis.getStatus('getLocation')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '确认打卡位置',\r\n\t\t\t\t\t\t\tcontent: this.address,\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tthis.getStatus('normal')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// this.SIGN_IN()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetTraineeId() {\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'student/clock/GetPlan.action',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tcookie: 'JSESSIONID=' + this.sessionId,\r\n\t\t\t\t\taddHeader: {\r\n\t\t\t\t\t\tencryptValue: this.encryptValue,\r\n\t\t\t\t\t\tReferer: 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.traineeId = res.data[0].dateList[0].traineeId\r\n\t\t\t\t\tthis.getAdcode()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetStatus(key) {\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'student/clock/GetPlan!detail.action',\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttraineeId: this.traineeId\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcookie: 'JSESSIONID=' + this.sessionId,\r\n\t\t\t\t\taddHeader: {\r\n\t\t\t\t\t\tencryptValue: this.encryptValue,\r\n\t\t\t\t\t\tReferer: 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (key == 'getLocation') {\r\n\t\t\t\t\t\tthis.lat = res.data.postInfo.lat\r\n\t\t\t\t\t\tthis.lng = res.data.postInfo.lng\r\n\t\t\t\t\t\tuni.setStorageSync('user_data', {\r\n\t\t\t\t\t\t\topenId: this.openId,\r\n\t\t\t\t\t\t\tunionId: this.unionId,\r\n\t\t\t\t\t\t\tlat: this.lat,\r\n\t\t\t\t\t\t\tlng: this.lng,\r\n\t\t\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\t\t\tpassword: this.password\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.getAdcode()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet status = res.data.clockInfo.status\r\n\t\t\t\t\t\tthis.status = status\r\n\t\t\t\t\t\tconsole.log(this.status)\r\n\t\t\t\t\t\tif (this.imgUrl.isChoose) {\r\n              //获取信息\r\n              this.getUserInfo()\r\n\t\t\t\t\t\t\t// this.commonPostPolicy()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.status != 0) {\r\n\t\t\t\t\t\t\t\tthis.SIGN_IN('student/clock/PostNew.action', this.status)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.SIGN_IN('student/clock/PostNew!updateClock.action', '1')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n      getUserInfo(){\r\n        request({\r\n          url: 'account/LoadAccountInfo.action',\r\n          method: 'POST',\r\n          cookie: 'JSESSIONID=' + this.sessionId,\r\n          addHeader: {\r\n            encryptValue: this.encryptValue,\r\n            Referer: 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n          }\r\n        }).then(res=>{\r\n          let {loginer,klass}=res.data;\r\n          this.drawInfoImg(loginer,klass)\r\n        })\r\n      },\r\n      drawInfoImg(loginer,klass){\r\n        uni.getImageInfo({\r\n          src: this.imgUrl.defaultUrl,\r\n          success: (e) => {\r\n            console.log(e)\r\n            this.canvansWidth=e.width/2\r\n            this.canvansHeight=e.height/2\r\n            let ctx = uni.createCanvasContext('firstCanvas', this)\r\n            setTimeout(()=>{\r\n              ctx.fillRect(0, 0, this.canvansWidth,this.canvansHeight);\r\n              // //将图片src放到cancas内，宽高为图片大小\r\n              ctx.drawImage(e.path, 0, 0,this.canvansWidth , this.canvansHeight);\r\n              ctx.beginPath()\r\n              ctx.setFontSize(12)\r\n              ctx.setFillStyle('#fff');\r\n              let hour=new Date().getHours()<10?'0'+new Date().getHours():new Date().getHours()\r\n              let minutes=new Date().getMinutes()<10?'0'+new Date().getMinutes():new Date().getMinutes()\r\n              let month=new Date().getMonth()+1<10?'0'+new Date().getMonth()+1:new Date().getMonth()\r\n              let today=new Date().getDate()<10?'0'+new Date().getDate():new Date().getDate()\r\n              let year=new Date().getFullYear()\r\n              let currentWeek=this.week[new Date().getDay()]\r\n              ctx.fillText(year+'.'+month+'.'+today,90,25,this.canvansWidth);\r\n              ctx.fillText(currentWeek,144,25,this.canvansWidth);\r\n              ctx.fillText(this.address,30,50)\r\n              ctx.fillText(`${loginer} ${klass}`,30,70)\r\n              ctx.setFontSize(18)\r\n              ctx.fillText(hour+':'+minutes,30,25,this.canvansWidth);\r\n              console.log(ctx)\r\n              ctx.draw(false, () => {\r\n                uni.canvasToTempFilePath({ //将画布中内容转成图片，即水印与图片合成\r\n                  canvasId: 'firstCanvas',\r\n                  success: (newImg) => {\r\n                    this.imgUrl = {\r\n                      isChoose: 0,\r\n                      defaultUrl: newImg.tempFilePath\r\n                    }\r\n                    this.commonPostPolicy()\r\n                  },\r\n                  fail:dx=>{\r\n                    console.log(dx)\r\n                  }\r\n                })\r\n              })\r\n            },1000)\r\n          },\r\n          fail:jjj=>{\r\n            console.log(this.imgUrl.defaultUrl)\r\n            console.log(jjj)\r\n          }\r\n        })\r\n\r\n      },\r\n\t\t\tcommonPostPolicy() {\r\n\t\t\t\tconsole.log('qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq')\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'uploadfile/commonPostPolicy.action',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcustomerType: 'STUDENT',\r\n\t\t\t\t\t\tuploadType: 'UPLOAD_STUDENT_CLOCK_IMGAGES',\r\n\t\t\t\t\t\tpublicRead: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcookie: 'JSESSIONID=' + this.sessionId,\r\n\t\t\t\t\taddHeader: {\r\n\t\t\t\t\t\tencryptValue: this.encryptValue,\r\n\t\t\t\t\t\tReferer: 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.uplodFile(res.data)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tuplodFile(data) {\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tconsole.log(data.dir)\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: 'https://xyb001-new.oss-cn-hangzhou.aliyuncs.com/',\r\n\t\t\t\t\tfilePath: this.imgUrl.defaultUrl,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\tkey: data.dir + '/' + new Date().getTime() + '.jpg',\r\n\t\t\t\t\t\tpolicy: data.policy,\r\n\t\t\t\t\t\tOSSAccessKeyId: data.accessid,\r\n\t\t\t\t\t\tsignature: data.signature,\r\n\t\t\t\t\t\tsuccess_action_status: '200',\r\n\t\t\t\t\t\tcustomerType: 'STUDENT',\r\n\t\t\t\t\t\tuploadType: 'UPLOAD_STUDENT_CLOCK_IMGAGES',\r\n\t\t\t\t\t\tcallback: data.callback\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tthis.signImgStr = JSON.parse(res.data).vo.key\r\n\t\t\t\t\t\tif (this.status != 0) {\r\n\t\t\t\t\t\t\tthis.SIGN_IN('student/clock/PostNew.action', this.status)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.SIGN_IN('student/clock/PostNew!updateClock.action', '1')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tSIGN_IN(url, status) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t'traineeId': this.traineeId,\r\n\t\t\t\t\t'adcode': this.adcode,\r\n\t\t\t\t\t'lat': this.lat,\r\n\t\t\t\t\t'lng': this.lng,\r\n\t\t\t\t\t'address': this.address,\r\n\t\t\t\t\t'deviceName': this.model,\r\n\t\t\t\t\t'punchInStatus': '0',\r\n\t\t\t\t\t'clockStatus': status,\r\n\t\t\t\t\t'imgUrl': this.signImgStr,\r\n\t\t\t\t\t'addressId': 'null'\r\n\t\t\t\t}\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tcookie: 'JSESSIONID=' + this.sessionId,\r\n\t\t\t\t\taddHeader: {\r\n\t\t\t\t\t\tencryptValue: this.encryptValue,\r\n\t\t\t\t\t\tReferer: 'https://servicewechat.com/wx9f1c2e0bbc10673c/457/page-frame.html'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log('---------------------------')\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tconsole.log('---------------------------')\r\n          uni.removeSavedFile({\r\n            filePath:this.cache,\r\n            success:(fileImg)=>{\r\n              console.log(fileImg,'删除成功')\r\n            },\r\n            fail:rr=>{\r\n              console.log(rr)\r\n            }\r\n          })\r\n          console.log('qwertyuiouytfdx--------------dfvgbthtgfdrgtgt---------------')\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '打卡成功',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function() {\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.model = res.model\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tlet user_data = uni.getStorageSync('user_data')\r\n\t\t\tif (user_data) {\r\n\t\t\t\tthis.openId = user_data.openId\r\n\t\t\t\tthis.unionId = user_data.unionId\r\n\t\t\t\tthis.lat = user_data.lat\r\n\t\t\t\tthis.lng = user_data.lng\r\n\t\t\t\tthis.username = user_data.username\r\n\t\t\t\tthis.password = user_data.password\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.config {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tpadding: 7px;\r\n    overflow: hidden;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 100%;\r\n\t\theight: 150px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.avatar>image {\r\n\t\twidth: 130px;\r\n\t\theight: 130px;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.userInfo {\r\n\t\twidth: 100%;\r\n\t\tflex-flow: wrap;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.userInfo>.Info {\r\n\t\twidth: 80%;\r\n\t\tdisplay: flex;\r\n\t\tpadding-top: 25px;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.userInfo>.Info>.avatarImg {\r\n\t\twidth: 40px;\r\n\t\tpadding: 0 10px;\r\n\t}\r\n\r\n\t.userInfo>.Info>.avatarImg>image {\r\n\t\twidth: 40px;\r\n\t\theight: 40px;\r\n\t}\r\n\r\n\t.userInfo>.Info>.avararInput {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.userInfo>.Info>.avararInput>input {\r\n\t\theight: 80%;\r\n\t\tborder-bottom: 1px solid #6c8dba;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.sign {\r\n\t\theight: 80px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.sign>.sumit {\r\n\t\twidth: 70%;\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\t\tbackground-color: #226bd4;\r\n\t\tborder-radius: 100px;\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t}\r\n</style>","import mod from \"-!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=style&index=0&id=11ea80f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=style&index=0&id=11ea80f4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734429678892\n      var cssReload = require(\"C:/Users/ASUS/Downloads/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}