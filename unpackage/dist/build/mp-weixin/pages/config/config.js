(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/config/config"],{5234:function(t,n,e){"use strict";(function(t){var o=e("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("3b2d")),d=o(e("29c2")),i={data:function(){return{openId:"",unionId:"",lat:"",lng:"",sessionId:"",traineeId:"",phone:"",adcode:"",address:"",status:""}},methods:{sumitInfo:function(){var n=this;t.showLoading({title:"加载中"}),t.setStorageSync("user_data",{openId:this.openId,unionId:this.unionId,lat:this.lat,lng:this.lng}),(0,d.default)({url:"login/login!wx.action",method:"GET",data:{openId:this.openId,unionId:this.unionId,lat:this.lat,lng:this.lng}}).then((function(e){200!=e.code?(t.hideLoading(),t.showModal({title:"提示",content:"登录出错，请检查openId,unionId是否正确",success:function(t){}})):(n.phone=e.data.phone,n.sessionId=e.data.sessionId,n.getTraineeId())}))},getAdcode:function(){var n=this,e={key:"c222383ff12d31b556c3ad6145bb95f4",location:this.lng+","+this.lat,extensions:"all",s:"rsx",platform:"WXJS",appname:"c222383ff12d31b556c3ad6145bb95f4",sdkversion:"1.2.0",logversion:"2.0"};console.log(e),t.request({url:"https://restapi.amap.com/v3/geocode/regeo",method:"GET",data:e}).then((function(e){console.log(e),n.address=e.data.regeocode.formatted_address,n.adcode=e.data.regeocode.addressComponent.adcode,t.hideLoading(),"object"==(0,a.default)(n.address)?t.showModal({title:"打卡位置出错",content:"是否自动获取学校打卡位置",success:function(e){e.confirm&&(t.showLoading({title:"加载中"}),n.getStatus("getLocation"))}}):t.showModal({title:"确认打卡位置",content:n.address,success:function(e){e.confirm&&(t.showLoading({title:"加载中"}),n.getStatus("normal"))}})}))},getTraineeId:function(){var t=this;(0,d.default)({url:"student/clock/GetPlan.action",method:"GET",cookie:"JSESSIONID="+this.sessionId}).then((function(n){t.traineeId=n.data[0].dateList[0].traineeId,t.getAdcode()}))},getStatus:function(n){var e=this;(0,d.default)({url:"student/clock/GetPlan!detail.action",method:"GET",data:{traineeId:this.traineeId},cookie:"JSESSIONID="+this.sessionId}).then((function(o){if("getLocation"==n)console.log(o),e.lat=o.data.postInfo.lat,e.lng=o.data.postInfo.lng,t.setStorageSync("user_data",{openId:e.openId,unionId:e.unionId,lat:e.lat,lng:e.lng}),e.getAdcode();else{var a=o.data.clockInfo.status;e.status=a,console.log(e.status)}}))},SIGN_IN:function(n){var e={openId:this.openId,unionId:this.unionId,address:this.address,traineeId:this.traineeId,brand:"apple",platform:"mac",system:"Mac",deviceId:"",lat:this.lat,lng:this.lng,punchInStatus:1,clockStatus:1};(0,d.default)({url:n,method:"GET",data:e,cookie:"JSESSIONID="+this.sessionId}).then((function(n){console.log("---------------------------"),console.log(n),console.log("---------------------------"),t.hideLoading(),t.showModal({title:"提示",content:"打卡成功",success:function(n){n.confirm&&t.switchTab({url:"/pages/index/index"})}})}))}},onLoad:function(){var n=t.getStorageSync("user_data");n&&(this.openId=n.openId,this.unionId=n.unionId,this.lat=n.lat,this.lng=n.lng)}};n.default=i}).call(this,e("df3c")["default"])},"6bfe":function(t,n,e){"use strict";(function(t,n){var o=e("47a9");e("0e51");o(e("3240"));var a=o(e("7af8"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},7887:function(t,n,e){"use strict";e.r(n);var o=e("5234"),a=e.n(o);for(var d in o)["default"].indexOf(d)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(d);n["default"]=a.a},"7af8":function(t,n,e){"use strict";e.r(n);var o=e("a318"),a=e("7887");for(var d in a)["default"].indexOf(d)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(d);e("b99b");var i=e("828b"),s=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,"1b7cf72b",null,!1,o["a"],void 0);n["default"]=s.exports},a318:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},a=[]},b99b:function(t,n,e){"use strict";var o=e("d943"),a=e.n(o);a.a},d943:function(t,n,e){}},[["6bfe","common/runtime","common/vendor"]]]);